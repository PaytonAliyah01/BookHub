@model BookHub.DAL.ReadingGoal

@if (Model != null)
{
    <div class="card border-primary">
        <div class="card-header bg-primary text-white py-2">
            <h6 class="mb-0"><i class="fas fa-target"></i> @Model.Year Reading Goal</h6>
        </div>
        <div class="card-body py-3">
            <div class="d-flex justify-content-between align-items-center mb-2">
                <span class="fw-bold">@Model.BooksRead / @Model.TargetBooks books</span>
                <span class="badge @GetStatusBadgeClass(Model.ProgressStatus)">@Model.ProgressStatus</span>
            </div>
            <div class="progress mb-2" style="height: 20px;">
                <div class="progress-bar @(Model.IsCompleted ? "bg-success" : "bg-info")" 
                     style="width: @Math.Min(100, Model.ProgressPercentage)%">
                    @Math.Round(Model.ProgressPercentage, 1)%
                </div>
            </div>
            <div class="d-flex justify-content-between">
                <small class="text-muted">@Model.BooksRemaining books to go</small>
                <a href="/ReadingGoals" class="btn btn-sm btn-outline-primary">View Details</a>
            </div>
        </div>
    </div>
}
else
{
    <div class="card border-secondary">
        <div class="card-header bg-secondary text-white py-2">
            <h6 class="mb-0"><i class="fas fa-target"></i> Reading Goal</h6>
        </div>
        <div class="card-body py-3 text-center">
            <p class="text-muted mb-3">No reading goal set for this year</p>
            <a href="/ReadingGoals" class="btn btn-primary btn-sm">Set Goal</a>
        </div>
    </div>
}

@functions {
    string GetStatusBadgeClass(string status)
    {
        return status switch
        {
            "Completed" => "badge-success",
            "On Track" => "badge-primary",
            "Behind" => "badge-warning", 
            "Far Behind" => "badge-danger",
            _ => "badge-secondary"
        };
    }
}